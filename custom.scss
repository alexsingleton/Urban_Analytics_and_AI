/*-- scss:defaults --*/

// ============================================================================
// GeoDS-Branded Theme for Urban Analytics Practicals
// Based on www.geods.ac.uk design language
// ============================================================================

// ---------------------------------------------------------------------------
// Fonts — GeoDS uses a clean sans-serif stack. We import Source Sans 3
// (open-source, close match to their body type) and Outfit for headings
// (geometric sans matching their heading style).
// ---------------------------------------------------------------------------

@import url('https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,400;1,500&family=JetBrains+Mono:wght@400;500&display=swap');

// ---------------------------------------------------------------------------
// GeoDS Colour Palette
// ---------------------------------------------------------------------------
// Extracted from the geods.ac.uk site: dark charcoal-navy navbar, blue
// accents, warm greys for backgrounds, and a deep footer.

$geods-charcoal:     #253882;   // Navbar & footer — blue matching geods.ac.uk (RGB 37,56,130)
$geods-dark-navy:    #1e2e6b;   // Darker variant (footer, hover states)
$geods-blue:         #1a6fb5;   // Primary blue accent (links, buttons, highlights)
$geods-blue-dark:    #155d99;   // Darker blue for hover states
$geods-blue-light:   #e8f1f8;   // Very light blue tint for backgrounds
$geods-blue-mid:     #2c7be5;   // Secondary brighter blue (used sparingly)
$geods-white:        #ffffff;
$geods-off-white:    #f8f9fa;   // Light page background
$geods-grey-100:     #f1f3f5;   // Subtle section backgrounds
$geods-grey-200:     #e9ecef;   // Borders, dividers
$geods-grey-300:     #dee2e6;
$geods-grey-500:     #8b95a1;   // Muted text
$geods-grey-700:     #495057;   // Secondary body text
$geods-body-text:    #2d3436;   // Primary body text — dark but not harsh black

// ---------------------------------------------------------------------------
// Bootstrap / Quarto Variable Overrides
// ---------------------------------------------------------------------------

// Typography — Figtree throughout, matching geods.ac.uk
$font-family-sans-serif: "Figtree", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
$headings-font-family:   "Figtree", -apple-system, BlinkMacSystemFont, sans-serif;
$font-family-monospace:  "JetBrains Mono", "Fira Code", "Consolas", monospace;

$font-size-base:   1.05rem;
$line-height-base: 1.7;
$headings-font-weight: 600;
$headings-line-height: 1.3;

// Colours
$body-color:    $geods-body-text;
$body-bg:       $geods-white;
$link-color:    $geods-blue;
$link-hover-color: $geods-blue-dark;

// Theme colours
$primary:   $geods-blue;
$secondary: $geods-charcoal;
$success:   #28a745;
$info:      $geods-blue;
$warning:   #f0ad4e;
$danger:    #dc3545;
$light:     $geods-off-white;
$dark:      $geods-charcoal;

// Navbar
$navbar-bg:            $geods-charcoal;
$navbar-fg:            $geods-white;
$navbar-hl:            $geods-blue;

// Sidebar / TOC
$toc-color:            $geods-grey-700;
$toc-active-border:    $geods-blue;

// Code
$code-color:           $geods-blue-dark;
$code-bg:              $geods-grey-100;
$code-block-bg:        #f6f8fa;

// Border radius
$border-radius:     0.375rem;
$border-radius-lg:  0.5rem;


/*-- scss:rules --*/

// ============================================================================
// Global
// ============================================================================

body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// ============================================================================
// Headings
// ============================================================================

h1, h2, h3, h4, h5, h6,
.h1, .h2, .h3, .h4, .h5, .h6 {
  color: $geods-charcoal;
  letter-spacing: -0.01em;
}

h1, .h1 {
  font-weight: 700;
  margin-bottom: 1rem;
}

h2, .h2 {
  font-weight: 600;
  padding-bottom: 0.4rem;
  border-bottom: 2px solid $geods-blue;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

h3, .h3 {
  font-weight: 600;
  color: $geods-blue-dark;
  margin-top: 1.5rem;
}

// ============================================================================
// Navbar
// ============================================================================

.navbar {
  font-family: $headings-font-family;
  font-weight: 600;
  letter-spacing: 0.01em;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
}

.navbar .navbar-brand {
  font-weight: 700;
  font-size: 1.15rem;
}

.navbar .nav-link {
  font-weight: 600;
  transition: none;
  border-bottom: 2px solid transparent;
  padding-bottom: 0.25rem;
  text-decoration: none !important;
}

.navbar .nav-link:hover,
.navbar .nav-link:focus {
  color: $geods-white !important;
  border-bottom: 2px solid $geods-white;
  text-decoration: none !important;
}

.navbar .nav-link.active {
  color: $geods-white !important;
  border-bottom: 2px solid $geods-white;
  text-decoration: none !important;
}

.navbar .nav-link.show,
.navbar .dropdown-toggle.show {
  text-decoration: none !important;
  border-bottom: 2px solid $geods-white;
}

// Dropdown menus
.navbar .dropdown-menu {
  border: 1px solid $geods-grey-200;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  border-radius: $border-radius;
}

.navbar .dropdown-item:hover,
.navbar .dropdown-item:focus {
  background-color: $geods-blue-light;
  color: $geods-blue-dark;
}

// ============================================================================
// Table of Contents (sidebar)
// ============================================================================

.sidebar nav[role="doc-toc"] a {
  color: $geods-grey-700;
  border-left: 2px solid transparent;
  transition: color 0.15s ease, border-left-color 0.15s ease;
}

.sidebar nav[role="doc-toc"] a:hover {
  color: $geods-blue;
}

.sidebar nav[role="doc-toc"] a.active {
  color: $geods-blue;
  border-left-color: $geods-blue;
  font-weight: 600;
}

// ============================================================================
// Code Blocks & Interactive Editors
// ============================================================================

// Standard code blocks
pre {
  background-color: $code-block-bg;
  border: 1px solid $geods-grey-200;
  border-radius: $border-radius;
  padding: 1rem 1.25rem;
  font-size: 0.9rem;
  line-height: 1.6;
}

code {
  font-family: $font-family-monospace;
  font-size: 0.88em;
}

// Inline code
p code, li code, td code {
  background-color: $geods-grey-100;
  padding: 0.15em 0.4em;
  border-radius: 0.25rem;
  color: $geods-blue-dark;
  font-size: 0.88em;
}

// quarto-live interactive editor styling — light border
.exercise-editor,
.live-code-editor {
  border: 1px solid $geods-grey-200;
  border-radius: $border-radius-lg;
  overflow: hidden;
  margin: 1rem 0 1.5rem 0;
}

// Run button styling for interactive blocks
button[class*="run"],
.btn-exercise,
.exercise-btn-run {
  background-color: $geods-blue !important;
  border-color: $geods-blue !important;
  color: $geods-white !important;
  font-family: $headings-font-family;
  font-weight: 500;
  border-radius: $border-radius;
  transition: background-color 0.2s ease;

  &:hover {
    background-color: $geods-blue-dark !important;
    border-color: $geods-blue-dark !important;
  }
}

// ============================================================================
// Callout Boxes
// ============================================================================

// Note callout (used for browser environment notice)
.callout-note {
  border-left-color: $geods-blue;
}

.callout-note .callout-icon::before {
  color: $geods-blue;
}

.callout-note .callout-header {
  background-color: $geods-blue-light;
}

// Tip callout — override Quarto's CSS custom properties
.callout-tip {
  border-left-color: #08CEA3 !important;
  --callout-color: #08CEA3;
  --callout-border-color: #08CEA3;
}

.callout-tip .callout-header {
  background-color: rgba(8, 206, 163, 0.1) !important;
}

.callout-tip .callout-icon::before,
.callout-tip .callout-toggle::before {
  color: #08CEA3 !important;
}

div.callout-tip.callout {
  border-left-color: #08CEA3 !important;
}

div.callout-tip.callout .callout-header {
  background-color: rgba(8, 206, 163, 0.1) !important;
}

// Warning callout
.callout-warning {
  border-left-color: $warning;
}

// Important callout
.callout-important {
  border-left-color: #FF8F42 !important;
  --callout-color: #FF8F42;
  --callout-border-color: #FF8F42;
}

.callout-important .callout-header {
  background-color: rgba(255, 143, 66, 0.1) !important;
}

.callout-important .callout-icon::before,
.callout-important .callout-toggle::before {
  color: #FF8F42 !important;
}

div.callout-important.callout {
  border-left-color: #FF8F42 !important;
}

div.callout-important.callout .callout-header {
  background-color: rgba(255, 143, 66, 0.1) !important;
}

// Caution callout (useful for Python-specific gotchas)
.callout-caution {
  border-left-color: #e67e22;
}

// ============================================================================
// Exercises
// ============================================================================

// Exercise blocks — lighter version of capstone style
// Quarto renders ::: {.exercise-block} as <section class="level3 exercise-block">
section.exercise-block,
div.exercise-block,
.exercise-block {
  background-color: rgba($geods-blue, 0.05) !important;
  border: 1px solid rgba($geods-blue, 0.25) !important;
  border-radius: $border-radius-lg !important;
  padding: 1.25rem 1.5rem !important;
  margin: 2rem 0 !important;

  > .anchored,
  > h3, > h4 {
    color: $geods-charcoal;
    border-bottom: none;
    margin-top: 0;
    padding-bottom: 0;
    padding-top: 0;
  }
}

// Also target capstone rendered as section
section.capstone,
div.capstone,
.capstone {
  background-color: rgba($geods-blue, 0.12) !important;
  border: 2px solid rgba($geods-blue, 0.4) !important;
  border-radius: $border-radius-lg !important;
  padding: 1.5rem 1.75rem !important;
  margin: 2.5rem 0 !important;

  > .anchored,
  > h2, > h3, > h4 {
    color: $geods-charcoal;
    border-bottom: none;
    margin-top: 0;
    padding-bottom: 0;
    padding-top: 0;
  }
}

// Exercise blocks (alternate class) — same styling
div.exercise {
  background-color: $geods-blue-light;
  border: 1px solid rgba($geods-blue, 0.2);
  border-radius: $border-radius-lg;
  padding: 1.25rem 1.5rem;
  margin: 2rem 0;

  h3, h4 {
    color: $geods-charcoal;
    border-bottom: none;
    margin-top: 0;
    padding-bottom: 0;
  }
}

// Hint and solution toggles
details[class*="hint"],
details[class*="solution"] {
  margin: 0.75rem 0;
  padding: 0.5rem 1rem;
  border: 1px solid $geods-grey-200;
  border-radius: $border-radius;
  background-color: $geods-off-white;

  summary {
    font-family: $headings-font-family;
    font-weight: 500;
    color: $geods-blue;
    cursor: pointer;

    &:hover {
      color: $geods-blue-dark;
    }
  }
}

// ============================================================================
// Tables
// ============================================================================

.table, table {
  border-color: $geods-grey-200;
  font-size: 0.95rem;
}

.table thead, table thead {
  background-color: $geods-charcoal;
  color: $geods-white;

  th {
    font-family: $headings-font-family;
    font-weight: 600;
    border-bottom-width: 2px;
  }
}

.table-striped tbody tr:nth-of-type(odd),
table tbody tr:nth-of-type(odd) {
  background-color: rgba($geods-blue, 0.04);
}

// ============================================================================
// Links
// ============================================================================

a {
  text-decoration: none;
  transition: color 0.15s ease;

  &:hover {
    text-decoration: underline;
    text-underline-offset: 3px;
  }
}

// ============================================================================
// Footer
// ============================================================================

.page-footer {
  background-color: $geods-charcoal;
  color: $geods-grey-300;
  font-size: 0.9rem;
  padding: 1.25rem 0;

  a {
    color: $geods-blue;

    &:hover {
      color: lighten($geods-blue, 15%);
    }
  }
}

// ============================================================================
// Learning Objectives Box
// ============================================================================

// A custom class for the learning objectives section
.learning-objectives {
  background: linear-gradient(135deg, $geods-blue-light 0%, rgba($geods-blue, 0.08) 100%);
  border: 1px solid rgba($geods-blue, 0.2);
  border-radius: $border-radius-lg;
  padding: 1.25rem 1.5rem;
  margin: 1.5rem 0;

  h2, h3 {
    color: $geods-blue-dark;
    border-bottom: none;
    margin-top: 0;
    font-size: 1.15rem;
  }

  ul {
    margin-bottom: 0;
  }

  li {
    padding: 0.15rem 0;
  }
}

// ============================================================================
// Capstone Exercise Highlight
// ============================================================================

// (capstone styling is defined alongside exercise-block above)

// ============================================================================
// Responsive Adjustments
// ============================================================================

@media (max-width: 768px) {
  $font-size-base: 1rem;

  h1 { font-size: 1.6rem; }
  h2 { font-size: 1.3rem; }
  h3 { font-size: 1.15rem; }

  pre {
    font-size: 0.82rem;
    padding: 0.75rem;
  }
}

// ============================================================================
// Print Styles
// ============================================================================

@media print {
  .navbar, .sidebar, .page-footer {
    display: none !important;
  }

  body {
    font-size: 11pt;
    color: #000;
  }

  a {
    color: #000;
    text-decoration: underline;
  }

  pre {
    border: 1px solid #ccc;
    page-break-inside: avoid;
  }

  h2 {
    border-bottom-color: #000;
  }
}
